<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MINI Whatsapp</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <h1>All Chats</h1>

    <form action="/chats/new" method="get">
        <button class="btn">+</button>
    </form>

    <div class="chats">
        <% for(chat of chats) { %>
            <div class="card">

                <div class="edit-dlt-form">

                     <form action="/chats/<%= chat._id %>" method="get" class="show-btn-form">
                        <button>show</button>
                    </form>

                    <form action="/chats/<%= chat._id %>/edit" method="get" class="edit-btn-form">
                        <button>edit</button>
                    </form>

                    <form action="/chats/<%= chat._id %>?_method=delete" method="post" class="dlt-btn-form">
                        <button class="dlt-btn" type="submit">delete</button>
                    </form>
                </div>

                <h2>From : <i>@<%= chat.from %></i></h2>
                <h2>To : <i>@<%= chat.to %></i></h2>
                <h2 id="msg">Message : <%= chat.message %></h2>

                <p><%= chat.created_at.toString().split(" ").slice(0,5).join(" ") %></p>
            </div>
        <% } %>
    </div>

    <div class="confirm-popup hidden">
        <div class="popup-card">
            <h2>Are you sure you want to delete this chat?</h2>
            <div class="popup-buttons">
                <button id="cancel-btn">Cancel</button>
                <button id="ok-btn">Delete</button>
            </div>
        </div>
    </div>

    <script src="/app.js"></script>
</body>
</html>
